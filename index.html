<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/index.css">
</head>
<body>

<div class="goods-list J-goods-list">
    <ul>
        <li>
            <img src="images/1.jpg">
            <div class="box">
                <p>本周售出&#x3000;<span>1174件</span></p>
            </div>
            <p class="txt1">乐事缤纷美味礼盒零食大礼包490g</p>
            <em>￥39.90</em>
        </li>
        <li>
            <img src="images/2.jpg">
            <div class="box">
                <p>本周售出&#x3000;<span>1174件</span></p>
            </div>
            <p class="txt1">乐事缤纷美味礼盒零食大礼包490g</p>
            <em>￥39.90</em>
        </li>
        <li>
            <img src="images/3.jpg">
            <div class="box">
                <p>本周售出&#x3000;<span>1174件</span></p>
            </div>
            <p class="txt1">乐事缤纷美味礼盒零食大礼包490g</p>
            <em>￥39.90</em>
        </li>
        <li>
            <img src="images/4.jpg">
            <div class="box">
                <p>本周售出&#x3000;<span>1174件</span></p>
            </div>
            <p class="txt1">乐事缤纷美味礼盒零食大礼包490g</p>
            <em>￥39.90</em>
        </li>
        <li>
            <img src="images/5.jpg">
            <div class="box">
                <p>本周售出&#x3000;<span>1174件</span></p>
            </div>
            <p class="txt1">乐事缤纷美味礼盒零食大礼包490g</p>
            <em>￥39.90</em>
        </li>
        <li>
            <img src="images/6.jpg">
            <div class="box">
                <p>本周售出&#x3000;<span>1174件</span></p>
            </div>
            <p class="txt1">乐事缤纷美味礼盒零食大礼包490g</p>
            <em>￥39.90</em>
        </li>
        <li>
            <img src="images/7.jpg">
            <div class="box">
                <p>本周售出&#x3000;<span>1174件</span></p>
            </div>
            <p class="txt1">乐事缤纷美味礼盒零食大礼包490g</p>
            <em>￥39.90</em>
        </li>
        <li>
            <img src="images/8.jpg">
            <div class="box">
                <p>本周售出&#x3000;<span>1174件</span></p>
            </div>
            <p class="txt1">乐事缤纷美味礼盒零食大礼包490g</p>
            <em>￥39.90</em>
        </li>
        <li>
            <img src="images/9.jpg">
            <div class="box">
                <p>本周售出&#x3000;<span>1174件</span></p>
            </div>
            <p class="txt1">乐事缤纷美味礼盒零食大礼包490g</p>
            <em>￥39.90</em>
        </li>
        <li>
            <img src="images/10.jpg">
            <div class="box">
                <p>本周售出&#x3000;<span>1174件</span></p>
            </div>
            <p class="txt1">乐事缤纷美味礼盒零食大礼包490g</p>
            <em>￥39.90</em>
        </li>
        <li>
            <img src="images/11.jpg">
            <div class="box">
                <p>本周售出&#x3000;<span>1174件</span></p>
            </div>
            <p class="txt1">乐事缤纷美味礼盒零食大礼包490g</p>
            <em>￥39.90</em>
        </li>
        <li>
            <img src="images/12.jpg">
            <div class="box">
                <p>本周售出&#x3000;<span>1174件</span></p>
            </div>
            <p class="txt1">乐事缤纷美味礼盒零食大礼包490g</p>
            <em>￥39.90</em>
        </li>
        <li>
            <img src="images/13.jpg">
            <div class="box">
                <p>本周售出&#x3000;<span>1174件</span></p>
            </div>
            <p class="txt1">乐事缤纷美味礼盒零食大礼包490g</p>
            <em>￥39.90</em>
        </li>
        <li>
            <img src="images/14.jpg">
            <div class="box">
                <p>本周售出&#x3000;<span>1174件</span></p>
            </div>
            <p class="txt1">乐事缤纷美味礼盒零食大礼包490g</p>
            <em>￥39.90</em>
        </li>
        <li>
            <img src="images/15.jpg">
            <div class="box">
                <p>本周售出&#x3000;<span>1174件</span></p>
            </div>
            <p class="txt1">乐事缤纷美味礼盒零食大礼包490g</p>
            <em>￥39.90</em>
        </li>
        <li>
            <img src="images/16.jpg">
            <div class="box">
                <p>本周售出&#x3000;<span>1174件</span></p>
            </div>
            <p class="txt1">乐事缤纷美味礼盒零食大礼包490g</p>
            <em>￥39.90</em>
        </li>
        <li>
            <img src="images/17.jpg">
            <div class="box">
                <p>本周售出&#x3000;<span>1174件</span></p>
            </div>
            <p class="txt1">乐事缤纷美味礼盒零食大礼包490g</p>
            <em>￥39.90</em>
        </li>
        <li>
            <img src="images/18.jpg">
            <div class="box">
                <p>本周售出&#x3000;<span>1174件</span></p>
            </div>
            <p class="txt1">乐事缤纷美味礼盒零食大礼包490g</p>
            <em>￥39.90</em>
        </li>
        <li>
            <img src="images/18.jpg">
            <div class="box">
                <p>本周售出&#x3000;<span>1174件</span></p>
            </div>
            <p class="txt1">乐事缤纷美味礼盒零食大礼包490g</p>
            <em>￥39.90</em>
        </li>
    </ul>
    <div class="btns">
        <a href="javascript:;" class="prev-btn J-prev-btn btn">&lt;</a>
        <a href="javascript:;" class="next-btn J-next-btn btn">&gt;</a>
    </div>
</div>

<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/jquery.easing.min.js"></script>
<script type="text/javascript">
    $(function () {
        function GoodsList(opts) {
            this.init(opts)
        }

        GoodsList.prototype = {
            $goodsList: null,
            $prevBtn: null,
            $nextBtn: null,
            $ul: null,
            $li: null,
            speed: 0,
            index: 0,
            pageSize: 0,
            init: function (opts) {
                var _this = this;
                _this.$goodsList = opts.$target;
                _this.$prevBtn = _this.$goodsList.find('.J-prev-btn');
                _this.$nextBtn = _this.$goodsList.find('.J-next-btn');
                _this.$ul = _this.$goodsList.find('ul');
                _this.$li = _this.$goodsList.find('li');

                _this.index = 0;
                _this.speed = opts.speed;
                _this.pageSize = opts.pageSize;

//            $.extend(_this, opts);

                _this.addEvents();
            },
            addEvents: function () {
                var _this = this;
                _this.$prevBtn.click(function () {
                    _this.move('left');
                });
                _this.$nextBtn.click(function () {
                    _this.move('right');
                });

            },
            move: function (direction) {//方向
                var _this = this;
                if (direction == 'left') {
                    _this.index -= _this.pageSize;
                } else {
                    _this.index += _this.pageSize;
                }
                _this.change(_this.index);
            },
            change: function (index) {
                var _this = this;
                _this.index = index;
                if (_this.index < 0) {
                    _this.index = 0;
                }
                if (_this.index > _this.$li.length - _this.pageSize) {
//                _this.index = _this.$li.length-_this.pageSize;
                    _this.index = Math.floor((_this.$li.length) / _this.pageSize) * _this.pageSize;
                }

                _this.$ul.stop().animate({
                    marginLeft: _this.$li.outerWidth(true) * -_this.index //outerWidth(true) 获取第一个匹配元素外部宽度（默认包括补白和边框）。


                }, _this.speed, 'easeOutBack');
            }


        };


        var goodsList = new GoodsList({
            $target: $('.J-goods-list'),
            speed: 500,
            pageSize: 4
        });


    })
</script>
</body>
</html>